{
  "$schema": "../../plugin-manifest.schema.json",
  "name": "ansible",
  "version": "1.0.0",
  "author": "Pabawi Team",
  "description": "Ansible integration for remote execution and inventory management",
  "integrationType": "RemoteExecution",
  "integrationTypes": ["RemoteExecution", "InventorySource"],
  "homepage": "https://www.ansible.com/",
  "color": "#EE0000",
  "icon": "terminal",
  "tags": ["ansible", "automation", "remote-execution", "playbooks", "inventory"],
  "minPabawiVersion": "1.0.0",
  "dependencies": [],
  "entryPoint": "./backend/index.js",
  "frontendEntryPoint": "./frontend/index.ts",
  "capabilities": [
    {
      "name": "command.execute",
      "category": "command",
      "description": "Execute shell commands on target nodes via Ansible (standardized interface)",
      "riskLevel": "execute",
      "requiredPermissions": ["ansible.command.execute"]
    },
    {
      "name": "task.execute",
      "category": "task",
      "description": "Execute Ansible tasks on target nodes (standardized interface)",
      "riskLevel": "execute",
      "requiredPermissions": ["ansible.task.execute"]
    },
    {
      "name": "script.execute",
      "category": "command",
      "description": "Execute scripts on target nodes via Ansible (standardized interface)",
      "riskLevel": "execute",
      "requiredPermissions": ["ansible.command.execute"]
    },
    {
      "name": "inventory.list",
      "category": "inventory",
      "description": "List all nodes from Ansible inventory (standardized interface)",
      "riskLevel": "read",
      "requiredPermissions": ["ansible.inventory.list"]
    },
    {
      "name": "inventory.get",
      "category": "inventory",
      "description": "Get specific node details from Ansible inventory (standardized interface)",
      "riskLevel": "read",
      "requiredPermissions": ["ansible.inventory.list"]
    },
    {
      "name": "inventory.groups",
      "category": "inventory",
      "description": "List available groups from Ansible inventory (standardized interface)",
      "riskLevel": "read",
      "requiredPermissions": ["ansible.inventory.list"]
    },
    {
      "name": "inventory.filter",
      "category": "inventory",
      "description": "Filter nodes by criteria (standardized interface)",
      "riskLevel": "read",
      "requiredPermissions": ["ansible.inventory.list"]
    }
  ],
  "widgets": [
    {
      "id": "ansible:home-widget",
      "name": "Ansible Summary",
      "component": "frontend/HomeWidget.svelte",
      "slots": ["home-summary"],
      "size": "medium",
      "requiredCapabilities": ["inventory.list"],
      "priority": 20
    },
    {
      "id": "ansible:home-page",
      "name": "Ansible Home",
      "component": "frontend/PluginHomePage.svelte",
      "slots": ["standalone-page"],
      "size": "full",
      "requiredCapabilities": ["inventory.list"],
      "route": "/integrations/ansible"
    },
    {
      "id": "ansible:playbook-runner",
      "name": "Playbook Runner",
      "component": "frontend/PlaybookRunner.svelte",
      "slots": ["dashboard", "node-detail"],
      "size": "large",
      "requiredCapabilities": ["task.execute"],
      "category": "task",
      "nodeScoped": true
    },
    {
      "id": "ansible:command-executor",
      "name": "Command Executor",
      "component": "frontend/CommandExecutor.svelte",
      "slots": ["dashboard", "node-detail"],
      "size": "large",
      "requiredCapabilities": ["command.execute"],
      "category": "command",
      "nodeScoped": true
    },
    {
      "id": "ansible:inventory-viewer",
      "name": "Inventory Viewer",
      "component": "frontend/InventoryViewer.svelte",
      "slots": ["dashboard", "inventory-panel"],
      "size": "medium",
      "requiredCapabilities": ["inventory.list"]
    },
    {
      "id": "ansible:node-detail-tabs",
      "name": "Ansible Node Actions",
      "component": "frontend/NodeDetailTabs.svelte",
      "slots": ["node-detail"],
      "size": "large",
      "requiredCapabilities": ["command.execute"],
      "nodeScoped": true,
      "priority": 5
    }
  ],
  "cliCommands": [
    {
      "name": "ansible",
      "actions": [
        {
          "name": "run",
          "capability": "command.execute",
          "description": "Run a command on target nodes via Ansible",
          "aliases": ["cmd"],
          "examples": [
            "pab ansible run 'hostname' --targets node1.example.com",
            "pab ansible run 'uptime' --targets all"
          ]
        },
        {
          "name": "playbook",
          "capability": "task.execute",
          "description": "Run an Ansible playbook on target nodes",
          "examples": [
            "pab ansible playbook site.yml --targets all",
            "pab ansible playbook deploy.yml --targets webservers"
          ]
        },
        {
          "name": "inventory",
          "capability": "inventory.list",
          "description": "List nodes from Ansible inventory",
          "examples": ["pab ansible inventory", "pab ansible inventory --format json"]
        }
      ]
    }
  ],
  "defaultPermissions": {
    "command.execute": ["admin", "operator"],
    "task.execute": ["admin", "operator"],
    "script.execute": ["admin", "operator"],
    "inventory.list": ["admin", "operator", "viewer"],
    "inventory.get": ["admin", "operator", "viewer"],
    "inventory.groups": ["admin", "operator", "viewer"],
    "inventory.filter": ["admin", "operator", "viewer"],
    "ansible.command.execute": ["admin", "operator"],
    "ansible.task.execute": ["admin", "operator"],
    "ansible.inventory.list": ["admin", "operator", "viewer"]
  }
}
